{"version":3,"names":[],"mappings":"","sources":["user-edit.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n/**\n * Created by bulger on 2017/5/17.\n */\n(function ($) {\n    var id = $('#userInfo').attr('data-uid');\n    $('.edit-menu').on('click', '.item', function () {\n        var self = $(this);\n        var id = self.attr('data-target');\n\n        self.addClass('active').siblings().removeClass('active');\n\n        $('.edit-menu-wrap > div').addClass('hide');\n        $('.edit-menu-wrap').find('#' + id).removeClass('hide');\n    });\n\n    $('.special.cards .image').dimmer({\n        on: 'hover'\n    });\n\n    // 消息推送设置\n    $('.j-messageSet [type=\"checkbox\"]').on('change', function () {\n        if ($(this).val() == 1) {\n            $(this).val(0);\n        } else {\n            $(this).val(1);\n        }\n        var data = {};\n        $('.j-messageSet [name]').each(function (i, e) {\n            data[$(e).attr('name')] = $(e).val();\n        });\n        $.ajax('/users/' + id + '/edit/message/setting', {\n            method: 'post',\n            data: data,\n            success: function success(res) {\n                if (res.code = 200) {\n                    window.notify(res.message);\n                }\n            },\n            error: function error() {\n                window.notify('服务器错误,请稍后再试', 'error');\n            }\n        });\n    });\n\n    // 隐私设置\n    $('.j-privacySet [type=\"radio\"]').on('change', function () {\n        var data = {\n            '_method': $('.j-privacySet [name=\"_method\"]').val(),\n            '_token': $('.j-privacySet [name=\"_token\"]').val()\n        };\n        $('.j-privacySet [name]:checked').each(function (i, e) {\n            data[$(e).attr('name')] = $(e).val();\n        });\n        console.log(data);\n\n        $.ajax('/users/' + id + '/edit/privacy/setting', {\n            method: 'post',\n            data: data,\n            success: function success(res) {\n                if (res.code = 200) {\n                    window.notify(res.message);\n                }\n            },\n            error: function error() {\n                window.notify('服务器错误,请稍后再试', 'error');\n            }\n        });\n    });\n\n    // 上传图片\n    $(document).on('click', '.j-upload', function () {\n        $('[name=\"filecontent\"]').click();\n    });\n    $('[name=\"filecontent\"]').change(function () {\n        $.getJSON('/getsign', function (data) {\n            var file = $('[name=\"filecontent\"]').val();\n            var fileName = file.substring(file.lastIndexOf('\\\\') + 1);\n            var sign = data.sign,\n                url = data.url + '/files/v2/1252873427/navcd/head_img/' + fileName;\n            console.log(url);\n            var options = {\n                type: 'post',\n                url: url,\n                dataType: 'json',\n                contentType: \"multipart/form-data\",\n                beforeSend: function beforeSend(xhr) {\n                    xhr.setRequestHeader('Authorization', sign);\n                },\n                success: function success(ret) {\n                    $('[name=\"head_src\"]').val(ret.data.access_url);\n                    $('.head-icon').attr('src', ret.data.access_url);\n                },\n                error: function error(ret) {\n                    alert(ret.responseText);\n                }\n            };\n\n            // pass options to ajaxForm\n            $('#uploadForm').ajaxSubmit(options);\n        });\n    });\n})(jQuery);\n\n},{}]},{},[1]);\n"],"file":"user-edit.js"}